# 2. 객체지향 프로그래밍

# 1. 영화 예매 시스템

### 용어

    영화 - 영화에 대한 기본정보 (제목, 상영시간, 가격 정보 등..) 

    상영 - 시레로 관객들이 영화를 관람하는 사건을 표현 (상영 일자, 시간, 순번 등..)

### 요구사항

#### **할인 조건** (Discount Cond-)    
- 순서 조건 (Sequence Cond-) - **상영 순번**을 이용해 할인 여부를 결정
- 기간 조건 (Period Cond-) - 영화 **상영 시작 시간**을 이용해 할인 여부 결정
#### **할인 정책**(Discount Policy)
- 금액 할인 정책 (Amount Discount Policy) - 예매 요금에서 **일정 금액** 할인
- 비율 할인 정책 (Percent Discount Policy) - 예매 요금에서 **일정 비율**의 요금 할인 

![](D:\study\.blog\blog\오브젝트\ch_2\2023-12-09-16-54-47-image.png)



# 2. 객체지향 프로그래밍을 향해

## 협력, 객체, 클래스

객체지향은 **클래스(class)가 아닌, 객체에 초첨**을 맞춰야 한다.

이를 위해 두가지에 집중해야 한다.

### 1. 어떤 클래스가 필요한지를 고민하기 전에 어떤 객체들이 필요한지 고민하라
   
   붕어빵으로 비유를 했을 때 
   - 클래스 - 붕어빵을 만들 수 있는 **틀**
   - 객체 - 틀에서 찍혀 나온 **붕어빵**
   
   객체(붕어빵)이 어떤 상태와 행동을 가지는지를 먼저 결정하면,    
   클래스(붕어빵 틀)이 윤곽을 잡기 쉽고, 설계를 단순하고 깔끔하게 만들 수 있다.

### 2. 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 혐력하는 공동체의 일원으로봐야 한다.
유연하고 확장 가능한 설계를 위해서 객체가 독립적인 존재여서는 안된다.    
왜?


## 도메인의 구조를 따르는 프로그램 구조
### 도메인 (domain)
문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야를 **도메인**이라고 부른다.   
이 프로그램에서의 문제는 **사용자가 영화를 좀 더 쉽고 빠르게 예매할 수 있는 시스템을 만드는 것**이다.

문제를 파악하고, 해결하기 위해 그려진 도메인에 따라 아래의 원칙에 맞춰 클래스를 만들자.    
**원칙 - 일반적으로 클래스의 이름은 대응되는 도메인 개념의 이름과 동일하거나, 적어도 유사하게 지어야 한다.**


아래 이미지는 영화 예매 도메인 구조에 맞게 만들어진 클래스 정보를 보여준다.    

![Alt text](image.png)

<br/>
<br/>
<br/>

## 클래스 구현하기

우리는 보통 클래스를 작성할 때 인스턴스 변수 - private, 메서드 - public으로 해서 외부에서 객체의 속성에 직접 접근하지 못하고, 객체의 속성은 public 메서드를 통해서만 변경할 수 있게 만든다.    

### 클래스의 내부와 외부를 구분해야 하는 이유

### 1. 자율적인 객체
- 경계의 명확성이 객체의 자율성을 보장한다.
- 객체는 **상태**(state)와 **행동**(behavior)을 함께 가지는 복합적인 존재다.
- 객체는 스스로 판단하고 행동하는 **자율적인 존재**이다.

#### 캡슐화
> 데이터와 기능을 객체 내부로 함께 묶고, 접근 제어자를 통해서 외부에서의 접근을 통제하는 것.

#### 객체 내부로의 접근을 통제하는 이유
> 객체를 **자율적인 존재**로 만들기 위해서이다.    

객체지향의 핵심은 객체가 스스로 상태를 관리하고, 판단하고, 행동하는 자율적인 객체들의 공동체를 구성하는 것인데, 외부에서의 접근을 통제하지 않고 누구든 자유롭게 수정할 수 있게 된다면 객체는 자율성을 잃어버리고, 스스로 의도한 대로 행동 할 수 없기 때문에 결과가 어떻게 나올지 예측할 수 없게 되어버린다.    
그래서 객체가 자율적인 존재로 존재하기 위해서는 **외부의 간섭을 최소화** 해야 한다.       

일반적으로 클래스의 속성은 private으로 감추고, 외부에 제공해야 하는 일부 메서드만 public으로 선언한다.    
이렇게 public으로 선언한 것은 퍼블릭 인터페이스(public interface)라고 부르고,     
private으로 선언한 것은 구현(implementation)이라고 부른다.(객체의 속성도 포함)    
이 내용을 인터페이스 구현의 분리 원칙(separation of interface and implementation)이라고 부른다.

결론은, 객체의 상태는 숨기고, 외부에 제공해야 하는 일부 메서드만 공개해야한다.

<br/>

### 2. 프로그래머에게 구현의 자유를 제공한다. (프로그래머의 자유)
#### 역할
- 클래스 작성자 (class creator) - 새로운 데이터 타입을 프로그램에 추가한다.
- 클라이언트 프로그래머 (client programmer) - 클래스 작성자가 추가한 데이터 타입을 사용한다.

#### 구현 은닉(impelementation hiding)
클래스 작성자는 클라이언트 프로그래머에게 필요한 부분만 공개하고, 나머지를 숨김으로써    
클라이언트 프로그래머가 숨겨놓은 부분에 마음대로 접근할 수 없도록 방지한다.    
이 덕분에 외부에 영향을 받지 않고도 내부 구현을 마음대로 변경할 수 있는데,    
이를 **구현 은닉**이라고 부른다.

#### 장점
- 클래스의 내부와 외부를 명확하게 경계 지어 내부 구현을 은닉할 수 있게 해준다.
- 클라이언트가 실수로 내부의 숨겨진 부분에 접근하는 것을 막아주며, 실수로 private에 접근하면 컴파일 오류를 뱉어준다.
- **클라이언트**는 퍼블릭 인터페이스만 알고 있으면 내부 구현을 몰라도 클래스를 사용할 수 있기 때문에 알아야하는 지식의 양이 줄어든다.
- **클래스 작성자**는 private에 해당하는 부분을 외부에 미치는 영향을 걱정하지 않고 내부의 구현을 자유롭게 수정할 수 있다.

결론은 구현 은닉을 잘 지키면, 각 역할에 맞는 사용자는 서로에 대해 신경쓰지 않고 각자 필요한 책임만 수행할 수 있다.

<br/>
<br/>


## 협력하는 객체들의 공동체

메시지 전송 - 객체가 다른 객체의 공개된 인터페이스에 행동을 수행하도록 요청 하는 것.    
메시지 수신 - 공개된 인터페이스를 가지고있는 객체가 다른 객체에서 보낸 요청이 도착하는 것.

### 협력(Collaboration)에 관해서..
> 시스템의 어떤 기능을 구현하기 위해 객체들 사이에 이뤄지는 상호작용.

객체지향 프로그램을 작성할 때는 먼저 **협력**의 관점에서 어떤 객체가 필요한지를 결정하고,    
공통 상태(state)와 행위(behavior)를 구현하기 위해 클래스를 작성한다.












   
